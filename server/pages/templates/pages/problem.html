{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.css">
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js" type="text/javascript"></script>
{% endblock %}


{% block content %}
    <div class="panel">
        <div class="left">
            <div class="gallery js-flickity" data-flickity-options='{ "wrapAround": true }' class="video">
                {% for camera in cameras %}
                <video class="gallery-cell" width="100%" controls>
                    <source src="{{ camera.local_video }}" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
                {% endfor %}
            </div>
            <div class="map">
                <script type="text/javascript" charset="utf-8" async src="{{ map_link }}"></script>
            </div>
        </div>
        <div class="right" style="text-align:left;padding: 10px 20px;">

            <span>Ситуация оценивается на <span style="background-color:red; border-radius: 5px; padding: 3px;">87</span></span>

            <h2 style="margin-top: 15px;" class="mb-4 text-3xl font-extrabold leading-none tracking-tight text-gray-900 md:text-3xl lg:text-3xl dark:text-white">Вероятные причины</h2>

            <ol style="list-style: auto; padding-left: 20px;">
                <li style="font-weight: 700;">
                    <span style="color:red;">Авария</span> - улица Северная (правый ряд)
                </li>
                <li>
                    Повышенный спрос
                </li>
            </ol>

            <h2 style="margin-top: 15px;" class="mb-4 text-3xl font-extrabold leading-none tracking-tight text-gray-900 md:text-3xl lg:text-3xl dark:text-white">Предлагаемые меры</h2>

            <ol style="list-style: auto; padding-left: 20px;">
                <li>
                    Обратиться в ОГИБДД (Центр)
                </li>
                <li>
                    Увеличить <span style="color:green; font-weight: 500;">ЗЕЛЁНУЮ</span> волну в направлении ул. Северная (восток)
                </li>
            </ol>


        </div>
    </div>
    <!-- <div id="app" style="width: 600px; height: 400px"></div>
    <button onclick="window.location.href='{ { url_for('main.video', video_id=1) } }'">Перекресток 1</button>
    <button onclick="window.location.href='{ { url_for('main.video', video_id=2) } }'">Перекресток 2</button> -->

    <style>
        .gallery-cell {
            height: 48vh;
        }
        .panel {
            display: flex;
            flex-direction: row;
            height: 100%;
        }
        .left {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 60%;
        }
        .left > div {
            width: 100%;
        }

        .right {
            height: 100%;
            width: 40%;
        }

        .video {
            height: 40%;
        }
        .map {
            height: 59%;
        }
    </style>
{% endblock %}
