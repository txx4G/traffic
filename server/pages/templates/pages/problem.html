{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.css">
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js" type="text/javascript"></script>
{% endblock %}


{% block content %}
    <h2>Карта</h2>
    <div class="panel">
        <div class="left">
            <div class="gallery js-flickity" data-flickity-options='{ "wrapAround": true }'>
                {% for camera in cameras %}
                <video class="gallery-cell" width="100%" controls>
                    <source src="{{ camera.local_video }}" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
                {% endfor %}
            </div>
            <div>
                <script type="text/javascript" charset="utf-8" async src="{{ map_link }}"></script>
            </div>
        </div>
        <div class="right">
            Рекомендации, аналитика, чат, эффективность принятых мер
        </div>
    </div>
    <!-- <div id="app" style="width: 600px; height: 400px"></div>
    <button onclick="window.location.href='{ { url_for('main.video', video_id=1) } }'">Перекресток 1</button>
    <button onclick="window.location.href='{ { url_for('main.video', video_id=2) } }'">Перекресток 2</button> -->

    <style>
        .gallery-cell {
            height: 48vh;
        }
        .panel {
            display: flex;
            flex-direction: row;
        }
        .left {
            display: flex;
            flex-direction: column;
            height: 70vh;
            width: 60%;
        }
        .left > div {
            width: 100%;
            height: 49vh;
        }
    </style>
{% endblock %}
